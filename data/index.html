


<p>DMX Channel:<input id=channel onchange="set(this)"></p>
<p>Scale:    <input id=scale  onchange="set(this)"></p>
<p>Speed:    <input id=speed  onchange="set(this)"></p>
<p>Accel:    <input id=accel  onchange="set(this)"></p>
<p>Target:   <input id=target onchange="set(this)"></p>
<p>Position: <input id=position></p>
<p>Homing:   <input id=home onchange="set(this)"></p>
<p>Enabled:  <input id=enable onchange="set(this)"></p>
<p>Alarm:    <input id=alarm></p>


<script>
function set(el) {
  let param = el.id;
  fetch(`/set?${param}=${el.value}`);
  el.blur();
  el.value = '';
}

function show(id, value) {
  let el = document.getElementById(id);
  if(el != document.activeElement)
    el.value = value;
}
  
setInterval(async()=>{
  let status = await(fetch("/status").then(r => r.text()));
  let parts = status.split(' ');
  show('channel' ,parts[0]);
  show('scale'   ,parts[1]);
  show('target'  ,parts[2]);
  show('speed'   ,parts[3]);
  show('accel'   ,parts[4]);
  show('position',parts[5]);
  show('alarm'   ,parts[6]);
},500);
</script>

